<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOTEXTIL - INICIO</title>
    <link rel="stylesheet" href="styleslavanda.css">
</head>

<body>
    <header>
        <nav class="nav-centro">
            <h1>Ecotextil</h1>
            <ul class="menu">
                <li><a href="index.html">inicio</a></li>
                <li class="dropdown">
                    <a href="nosotros.html">Nosotros</a>
                    <ul class="submenu">
                        <li><a href="#quienes-somos">Quiénes Somos</a></li>
                        <li><a href="#nuestra-mision">Nuestra Misión</a></li>
                        <li><a href="#nuestra-vision">Nuestra Visión</a></li>
                        <li><a href="#resultados">Resultados de la Encuesta</a></li>
                    </ul>
                </li>
                <li><a href="productos2.html">Productos</a></li>
                <li><a href="Contactanos.html">Contáctanos</a></li>
                <li>
                    <a href="Carrito.html" class="carrito-icono" style="position: relative;">
                       <img src="img/464-4646442_carrito-de-compras-carro-de-compras-blanco-clipart.png" alt="Carrito de compras" style="width: 24px; height: 24px;">
                       <span id="contador-carrito" style="position: absolute; top: -8px; right: -8px; background-color: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    
    <main>
        
        <div class="textarea">
            <h1>Buzón de Sugerencias</h1>
            <p>Si tienes alguna pregunta, no dudes en ponerte en contacto con nosotros. Completa el formulario a continuación y recibiremos tu sugerencia o comentario</a>.</p>
            <form action="#" method="POST">
                <div class="form-group">
                    <label for="name">Nombre:</label>
                    <input type="text" id="name" name="name" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" placeholder="" required>
                </div>
                <div class="form-group">
                    <label for="suggestion">Tu sugerencia o comentario:</label>
                    <textarea id="suggestion" name="suggestion" rows="5" placeholder="" required></textarea>
                </div>
                <button type="submit">Enviar</button>
            </form>

<section class="social-media">
                           
</section>
    

    </main>

    <footer>
        <div class="container" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 2rem;">
            <!-- Buzón de sugerencias -->
            <div style="flex: 1; min-width: 250px;">
                <h3>Buzón de Sugerencias</h3>
                <form id="sugerencias-form" style="display: flex; flex-direction: column; gap: 1rem;">
                    <textarea name="sugerencia" rows="4" placeholder="Escribe tu sugerencia aquí..." required
                        style="padding: 1rem; border: 1px solid #ccc; border-radius: 8px;"></textarea>
                    <button type="submit"
                        style="background-color: #fffbbc; color: black; border: none; padding: 0.75rem; border-radius: 8px; cursor: pointer;">
                        Enviar Sugerencia
                    </button>
                    <p id="mensaje-confirmacion" style="display: none; color: green;">¡Gracias por tu sugerencia!</p>
                </form>
            </div>

            <!-- Redes sociales -->
            <div style="flex: 1; min-width: 250px;">
                <h3>Síguenos en:</h3>
                <div class="social-icons">
                    <a href="https://www.instagram.com/" target="_blank" class="social-btn instagram">
                        <img src="img/Instagram-logo.png" alt="Instagram">
                    </a>
                    <a href="https://wa.me/3147700560" target="_blank" class="social-btn whatsapp">
                        <img src="img/whatsapp-logo.webp" alt="WhatsApp">
                    </a>
                    <a href="https://www.facebook.com/" target="_blank" class="social-btn facebook">
                        <img src="img/facebook-logo.webp" alt="Facebook">
                    </a>
                </div>
            </div>
        </div>

        <div class="container" style="text-align: center; margin-top: 1rem;">
            <p>&copy; 2024 ECOTEXTIL. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Efecto en la sección hero
        document.querySelector('.hero').addEventListener('click', function () {
            this.classList.add('fade-out');
        });

        // Confirmación de sugerencia
        const form = document.getElementById('sugerencias-form');
        const mensaje = document.getElementById('mensaje-confirmacion');

        form.addEventListener('submit', function (e) {
            e.preventDefault();
            mensaje.style.display = 'block';
            form.reset();
        });

        // ===== ACTUALIZAR CONTADOR DEL CARRITO =====
        function actualizarContadorCarrito() {
            const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
            const cantidad = carrito.reduce((acc, item) => acc + item.cantidad, 0);
            const contador = document.getElementById('contador-carrito');
            if (contador) contador.textContent = cantidad;
        }

        // Ejecutar al cargar la página
        document.addEventListener('DOMContentLoaded', actualizarContadorCarrito);


        // ==========================
        // --- CHATBOT AVANZADO V6 ---
        // ==========================
        const chatbotToggle = document.getElementById('chatbot-toggle');
        const chatbotWindow = document.getElementById('chatbot-window');
        const chatClose = document.getElementById('close-chat');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const clearChatButton = document.getElementById('clear-chat-button');
        const chatMessages = document.getElementById('chat-messages');

        const productos = [
            {
                nombre: "Maleta de Jean",
                link: "productomaleta.html",
                categoria: "accesorios",
                precio: "$29.000",
                caracteristicas: "Hecha de tela de jean reciclada, forrada con tela sintetica. Ideal para el día a día. Cómoda y duradera.",
                medidas: "40cm x 35cm"
            },
            {
                nombre: "Bolso de Jean",
                link: "productobolso.html",
                categoria: "accesorios",
                precio: "$22.000",
                caracteristicas: "Hecho de tela de jean reciclada. Ideal para el día a día. Cómodo y duradero.",
                medidas: "25cm x 30cm"
            },
            {
                nombre: "Trapo para Limpiar",
                link: "productotrapo.html",
                categoria: "hogar",
                precio: "$6.000",
                caracteristicas: "Elaborado con telas de algodón reutilizadas. Absorbe líquidos de manera eficiente. Ideal para la limpieza del hogar.",
                medidas: "24cm x 24cm"
            },
            {
                nombre: "Funda para Almohada",
                link: "productofunda.html",
                categoria: "hogar",
                precio: "$8.000",
                caracteristicas: "Fabricada con retazos de tela de distintos colores. Suave al tacto y fácil de lavar.",
                medidas: "43cm x 43cm"
            },
            {
                nombre: "Cama para Perro",
                link: "productocamaperro.html",
                categoria: "mascotas",
                precio: "$30.000",
                caracteristicas: "Rellena con fibras de ropa reciclada. Proporciona comodidad y calidez a tu mascota.",
                medidas: "40cm x 40cm"
            },
            {
                nombre: "Cama para Gato",
                link: "productocamagato.html",
                categoria: "mascotas",
                precio: "$30.000",
                caracteristicas: "Diseñada para el confort de los felinos. Materiales suaves y ecológicos.",
                medidas: "40cm x 40cm"
            },
            {
                nombre: "Pañoleta",
                link: "productopañoleta.html",
                categoria: "mascotas",
                precio: "$8.000",
                caracteristicas: "Perfecta para complementar el look de tu mascota. Hecha de tela de algodón reutilizada.",
                medidas: "39cm x 95cm"
            }
        ];

        function addMessage(msg, sender = "bot", isHtml = false) {
            const div = document.createElement('div');
            div.classList.add('message');
            div.classList.add(sender === "bot" ? "bot-message" : "user-message");
            if (isHtml) {
                div.innerHTML = msg;
            } else {
                div.textContent = msg;
            }
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // Función para renderizar el menú de categorías con acordeones y animación
        function displayCategoryAccordion() {
            const categories = ['mascotas', 'hogar', 'accesorios'];
            let html = '<p>Puedes explorar nuestros productos por categoría:</p>';
            
            categories.forEach(category => {
                const categoryProducts = productos.filter(p => p.categoria === category);
                const categoryId = `category-${category}-${Date.now()}`;
                
                // Agregamos un contenedor para la animación de apertura
                html += `
                    <div class="product-accordion-item">
                        <button class="accordion-button" aria-expanded="false" aria-controls="${categoryId}">
                            ${category.charAt(0).toUpperCase() + category.slice(1)}
                            <span class="accordion-icon">▶</span>
                        </button>
                        <div id="${categoryId}" class="accordion-content">
                            <div class="category-content-container">
                                ${categoryProducts.map((p, index) => {
                                    const productId = `product-${p.nombre.replace(/\s/g, '-')}-${Date.now()}-${index}`;
                                    return `
                                        <div class="product-accordion-item-nested">
                                            <button class="accordion-button" aria-expanded="false" aria-controls="${productId}">
                                                ${p.nombre}
                                                <span class="accordion-icon">▶</span>
                                            </button>
                                            <div id="${productId}" class="accordion-content">
                                                <p><strong>Precio:</strong> ${p.precio}</p>
                                                <p><strong>Características:</strong> ${p.caracteristicas}</p>
                                                <p><strong>Medidas:</strong> ${p.medidas}</p>
                                                <button class="buy-button" onclick="window.location.href='${p.link}'">Ver y Comprar</button>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });
            addMessage(html, "bot", true);
            setupAccordionListeners();
        }

        // Función para configurar los listeners de los acordeones y la animación de apertura
        function setupAccordionListeners() {
            document.querySelectorAll('.accordion-button').forEach(button => {
                button.addEventListener('click', () => {
                    const content = document.getElementById(button.getAttribute('aria-controls'));
                    const isExpanded = button.getAttribute('aria-expanded') === 'true';

                    button.setAttribute('aria-expanded', !isExpanded);
                    content.classList.toggle('active');
                    
                    // Activa la animación del contenido interior para un efecto de "apertura"
                    const innerContent = content.querySelector('.category-content-container');
                    if (innerContent) {
                        innerContent.classList.toggle('active', !isExpanded);
                    }
                    
                    button.querySelector('.accordion-icon').textContent = isExpanded ? '▶' : '▼';
                });
            });
        }

        // Función para manejar las respuestas del bot
        function handleBotResponse(query) {
            const q = query.toLowerCase().trim();

            // Si el usuario escribe algo, muestra el mensaje de bienvenida y el menú
            if (q.length > 0) {
                const welcomeMessage = `
                    ¡Hola! Soy el asistente de Ecotextil. 🌱
                    <br><br>
                    ¿En qué puedo ayudarte?
                `;
                addMessage(welcomeMessage, "bot", true);
                displayCategoryAccordion();
                return;
            }
        }

        // Event Listeners
        chatbotToggle.addEventListener('click', () => {
            const isVisible = chatbotWindow.style.display === 'block';
            chatbotWindow.style.display = isVisible ? 'none' : 'block';
            if (!isVisible) {
                // Al abrir el chat, el contenedor de mensajes se vacía y no se muestra nada.
                chatMessages.innerHTML = '';
            }
        });

        chatClose.addEventListener('click', () => {
            chatbotWindow.style.display = 'none';
        });

        sendButton.addEventListener('click', () => {
            const text = userInput.value.trim();
            if (text === "") {
                return; // Evita enviar mensajes vacíos
            }
            addMessage(text, "user");
            chatMessages.innerHTML = ''; // Limpia el chat para la nueva respuesta
            handleBotResponse(text);
            userInput.value = '';
        });

        userInput.addEventListener('keypress', e => {
            if (e.key === 'Enter') sendButton.click();
        });

        clearChatButton.addEventListener('click', () => {
            chatMessages.innerHTML = '';
        });


  function abrirModal() {
    const modal = document.getElementById('miModal');
    modal.style.display = 'block';
    modal.setAttribute('aria-hidden', 'false');
    // Evita scroll de fondo
    document.documentElement.style.overflow = 'hidden';
    document.body.style.overflow = 'hidden';
  }
  function cerrarModal() {
    const modal = document.getElementById('miModal');
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    document.documentElement.style.overflow = '';
    document.body.style.overflow = '';
  }
  // Cerrar al hacer clic fuera del cuadro
  window.addEventListener('click', (e) => {
    const modal = document.getElementById('miModal');
    if (e.target === modal) cerrarModal();
  });
  // Cerrar con Escape
  window.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') cerrarModal();
  });

    </script>
</body>
</html>
