<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECOTEXTIL - Inicio</title>
    <link rel="stylesheet" href="styleslavanda.css">

</head>
<body>
    <header>
        <nav class="nav-centro">
            <h1>Ecotextil</h1>
            <ul class="menu">
                <li><a href="index.html">inicio</a></li>
                <li class="dropdown">
                    <a href="nosotros.html">Nosotros</a>
                    <ul class="submenu">
                        <li><a href="#quienes-somos">Quiénes Somos</a></li>
                        <li><a href="#nuestra-mision">Nuestra Misión</a></li>
                        <li><a href="#nuestra-vision">Nuestra Visión</a></li>
                        <li><a href="#resultados">Resultados de la Encuesta</a></li>
                    </ul>
                </li>
                <li><a href="productos2.html">Productos</a></li>
                <li><a href="Contactanos.html">Contáctanos</a></li>
                <li>
                    <a href="Carrito.html" class="carrito-icono" style="position: relative;">
                       <img src="img/464-4646442_carrito-de-compras-carro-de-compras-blanco-clipart.png" alt="Carrito de compras" style="width: 24px; height: 24px;">
                       <span id="contador-carrito" style="position: absolute; top: -8px; right: -8px; background-color: red; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="inicio" class="hero">
            <div class="container hero-content">
                <h2>Moda con Impacto</h2>
                <p>productos sostenibles que marcan la diferencia.</p>
                <a href="productos2.html" class="btn">Descubre Nuestros Productos</a>
                <div id="theCarousel" class="carousel slide" data-ride="carousel"></div>
            </div>
        </section>

        <div class="slider-box">
            <ul>
                <li>
                    <div class="slide-item">
                        <img src="img/pañoleta.jpg" alt="Producto 1">
                        <p class="description">Pañoleta</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/bolsojean.jpg" alt="Producto 2">
                        <p class="description">Bolso de Jean</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-06-05 at 11.37.26 PM.jpeg" alt="Producto 3">
                        <p class="description">Cama para Perro</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-09-11 at 1.32.17 PM.jpeg" alt="Producto 4">
                        <p class="description">Maleta de Jean</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-06-06 at 1.17.37 PM.jpeg" alt="Producto 5">
                        <p class="description">Trapo para Limpiar</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-08-29 at 1.40.49 PM.jpeg" alt="Producto 6">
                        <p class="description">Funda para Almohada</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/pañoleta.jpg" alt="Producto 1">
                        <p class="description">Pañoleta</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/bolsojean.jpg" alt="Producto 2">
                        <p class="description">Bolso de Jean</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-06-05 at 11.37.26 PM.jpeg" alt="Producto 3">
                        <p class="description">Cama para Perro</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-09-11 at 1.32.17 PM.jpeg" alt="Producto 4">
                        <p class="description">Maleta de Jean</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-06-06 at 1.17.37 PM.jpeg" alt="Producto 5">
                        <p class="description">Trapo para Limpiar</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
                <li>
                    <div class="slide-item">
                        <img src="img/WhatsApp Image 2025-08-29 at 1.40.49 PM.jpeg" alt="Producto 6">
                        <p class="description">Funda para Almohada</p>
                        <a href="productos2.html" class="btn-ver-mas">Ver más</a>
                    </div>
                </li>
            </ul>
        </div>

            <center><h2>Descubre nuestros productos segun tu necesidad</h2></center>

        <section class="banner-categorias">
          <div class="categoria-banner pastel-card" style="background-image: url('img/illustration-silhouettes-of-dogs-and-cats-vector.jpg');">
            <div class="contenido">
              <h3 class="titulo-categoria">MASCOTAS</h3>
              <p class="descripcion-categoria"></p>
              <button class="boton-plus" onclick="window.location.href='productos2.html'">+</button>

            </div>
          </div>
          <div class="categoria-banner pastel-card" style="background-image: url('img/Basic_Elements__28161_29.jpg')">
            <div class="contenido">
              <h3 class="titulo-categoria">HOGAR</h3>
              <p class="descripcion-categoria"></p>
              <button class="boton-plus" onclick="window.location.href='productos2.html'">+</button>

            </div>
          </div>
          <div class="categoria-banner pastel-card" style="background-image: url('img/depositphotos_380531026-stock-illustration-shopping-bag-icon-bag-vector.jpg');">
            <div class="contenido">
              <h3 class="titulo-categoria">ACCESORIOS</h3>
              <p class="descripcion-categoria"></p>
              <button class="boton-plus" onclick="window.location.href='productos2.html'">+</button>

            </div>
          </div>
        </section>

        <div id="chatbot-container">
            <button id="chatbot-toggle" class="circle-button"> 💬 </button>
            <div id="chatbot-window">
                <div id="chat-header">
                    <h3>Asistente Ecotextil</h3>
                    <span id="close-chat">&times;</span>
                </div>
                <div id="chat-messages">
                    </div>
                <div id="chat-input-container">
                    <input type="text" id="user-input" placeholder="Escribe aquí..." />
                    <button id="send-button">Enviar</button>
                    <button id="clear-chat-button">Limpiar</button>
                </div>
            </div>
        </div>

        <div id="product-details-popup">
            <div id="product-details-content">
                <span id="close-popup">&times;</span>
                <h3 id="product-name"></h3>
                <img id="product-image" src="" alt="Imagen del producto">
                <p id="product-description"></p>
                <p id="product-price"></p>
                <p id="product-features"></p>
                <button id="buy-button">Añadir al Carrito</button>
            </div>
        </div>

    <div style="text-align:center; margin: 40px 0;">
      <button class="btn-encuesta" onclick="abrirModal()">📋 Participar en la Encuesta</button>
    </div>

    <div id="miModal" aria-hidden="true">
      <div class="modal-content" role="dialog" aria-modal="true" aria-label="Encuesta">
        <button class="close" aria-label="Cerrar encuesta" onclick="cerrarModal()">&times;</button>
        <h2 style="margin-top:0; text-align:center;">Formulario de Encuesta</h2>

        <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSdaiioL79tYzXJpZDz_PtSCuuaNbYFRT74u2r_1M8q1kGwHBw/viewform?embedded=true"
                loading="lazy"></iframe>
      </div>
    </div>


    </main>

    <footer>
        <div class="container" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 2rem;">
            <div style="flex: 1; min-width: 250px;">
                <h3>Buzón de Sugerencias</h3>
                <form id="sugerencias-form" style="display: flex; flex-direction: column; gap: 1rem;">
                    <textarea name="sugerencia" rows="4" placeholder="Escribe tu sugerencia aquí..." required
                        style="padding: 1rem; border: 1px solid #ccc; border-radius: 8px;"></textarea>
                    <button type="submit"
                        style="background-color: #9c88ff; color: white; border: none; padding: 0.75rem; border-radius: 8px; cursor: pointer;">
                        Enviar Sugerencia
                    </button>
                    <p id="mensaje-confirmacion" style="display: none; color: green;">¡Gracias por tu sugerencia!</p>
                </form>
            </div>

            <div style="flex: 1; min-width: 250px;">
                <h3>Síguenos en:</h3>
                <div class="social-icons">
                    <a href="https://www.instagram.com/" target="_blank" class="social-btn instagram">
                        <img src="img/Instagram-logo.png" alt="Instagram">
                    </a>
                    <a href="https://wa.me/3147700560" target="_blank" class="social-btn whatsapp">
                        <img src="img/whatsapp-logo.webp" alt="WhatsApp">
                    </a>
                    <a href="https://www.facebook.com/" target="_blank" class="social-btn facebook">
                        <img src="img/facebook-logo.webp" alt="Facebook">
                    </a>
                </div>
            </div>
        </div>

        <div class="container" style="text-align: center; margin-top: 1rem;">
            <p>&copy; 2024 ECOTEXTIL. Todos los derechos reservados.</p>
        </div>
    </footer>

<script>
    function cambiarImagen(img) {
      document.getElementById('imagen-principal').src = img.src;
    }

    function agregarAlCarrito() {
      const nombre = document.querySelector('.info h2').textContent.trim();
      const precioTexto = document.querySelector('.precio').textContent.replace(/[^\d]/g, '');
      const precio = parseInt(precioTexto, 10) || 0;
      const cantidad = 1;
      const imagen = document.getElementById('imagen-principal').src;

      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const index = carrito.findIndex(item => item.nombre === nombre);

      if (index > -1) {
        carrito[index].cantidad += cantidad;
      } else {
        carrito.push({ nombre, precio, cantidad, imagen });
      }

      localStorage.setItem('carrito', JSON.stringify(carrito));

      // Actualizar contador total
      let total = carrito.reduce((sum, item) => sum + item.cantidad, 0);
      localStorage.setItem('carritoCantidad', total);
      document.getElementById('contador-carrito').textContent = total;

      document.getElementById('mensaje-ok').style.display = 'block';
      setTimeout(() => {
        document.getElementById('mensaje-ok').style.display = 'none';
      }, 1500);
    }

    function actualizarContadorCarrito() {
      const cantidad = localStorage.getItem('carritoCantidad') || '0';
      const contador = document.getElementById('contador-carrito');
      if (contador) contador.textContent = cantidad;
    }

    actualizarContadorCarrito();

    // ==========================
    // --- CHATBOT AVANZADO V6 ---
    // ==========================
    const chatbotToggle = document.getElementById('chatbot-toggle');
    const chatbotWindow = document.getElementById('chatbot-window');
    const chatClose = document.getElementById('close-chat');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const clearChatButton = document.getElementById('clear-chat-button');
    const chatMessages = document.getElementById('chat-messages');

    const productos = [
      {
        nombre: "Maleta de Jean",
        link: "productomaleta.html",
        categoria: "accesorios",
        precio: "$29.000",
        caracteristicas: "Hecha de tela de jean reciclada, forrada con tela sintética. Ideal para el día a día. Cómoda y duradera.",
        medidas: "40cm x 35cm",
        imagen: "img/WhatsApp Image 2025-09-11 at 1.32.17 PM.jpeg"
      },
      {
        nombre: "Bolso de Jean",
        link: "productobolso.html",
        categoria: "accesorios",
        precio: "$22.000",
        caracteristicas: "Hecho de tela de jean reciclada. Ideal para el día a día. Cómodo y duradero.",
        medidas: "25cm x 30cm",
        imagen: "img/bolsojean.jpg"
      },
      {
        nombre: "Trapo para Limpiar",
        link: "productotrapo.html",
        categoria: "hogar",
        precio: "$6.000",
        caracteristicas: "Elaborado con telas de algodón reutilizadas. Absorbe líquidos de manera eficiente. Ideal para la limpieza del hogar.",
        medidas: "24cm x 24cm",
        imagen: "img/WhatsApp Image 2025-06-06 at 1.17.37 PM (2).jpeg"
      },
      {
        nombre: "Funda para Almohada",
        link: "productofunda.html",
        categoria: "hogar",
        precio: "$8.000",
        caracteristicas: "Fabricada con retazos de tela de distintos colores. Suave al tacto y fácil de lavar.",
        medidas: "43cm x 43cm",
        imagen: "img/WhatsApp Image 2025-08-29 at 1.40.49 PM.jpeg"
      },
      {
        nombre: "Cama para Perro",
        link: "productocamaperro.html",
        categoria: "mascotas",
        precio: "$30.000",
        caracteristicas: "Rellena con fibras de ropa reciclada. Proporciona comodidad y calidez a tu mascota.",
        medidas: "40cm x 40cm",
        imagen: "img/WhatsApp Image 2025-06-05 at 11.37.26 PM.jpeg"
      },
      {
        nombre: "Cama para Gato",
        link: "productocamagato.html",
        categoria: "mascotas",
        precio: "$30.000",
        caracteristicas: "Diseñada para el confort de los felinos. Materiales suaves y ecológicos.",
        medidas: "40cm x 40cm",
        imagen: "img/WhatsApp Image 2025-06-05 at 11.37.26 PM.jpeg"
      },
      {
        nombre: "Pañoleta",
        link: "productopañoleta.html",
        categoria: "mascotas",
        precio: "$8.000",
        caracteristicas: "Perfecta para complementar el look de tu mascota. Hecha de tela de algodón reutilizada.",
        medidas: "39cm x 95cm",
        imagen: "img/pañoleta.jpg"
      }
    ];

    function addMessage(msg, sender = "bot", isHtml = false) {
      const div = document.createElement('div');
      div.classList.add('message');
      div.classList.add(sender === "bot" ? "bot-message" : "user-message");
      if (isHtml) {
        div.innerHTML = msg;
      } else {
        div.textContent = msg;
      }
      chatMessages.appendChild(div);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    // Renderizar categorías con acordeones e imágenes
    function displayCategoryAccordion() {
      const categories = ['mascotas', 'hogar', 'accesorios'];
      let html = '<p>Puedes explorar nuestros productos por categoría:</p>';
      
      categories.forEach(category => {
        const categoryProducts = productos.filter(p => p.categoria === category);
        const categoryId = `category-${category}-${Date.now()}`;
        
        html += `
          <div class="product-accordion-item">
            <button class="accordion-button" aria-expanded="false" aria-controls="${categoryId}">
              ${category.charAt(0).toUpperCase() + category.slice(1)}
              <span class="accordion-icon">▶</span>
            </button>
            <div id="${categoryId}" class="accordion-content">
              <div class="category-content-container">
                ${categoryProducts.map((p, index) => {
                  const productId = `product-${p.nombre.replace(/\s/g, '-')}-${Date.now()}-${index}`;
                  return `
                    <div class="product-accordion-item-nested">
                      <button class="accordion-button" aria-expanded="false" aria-controls="${productId}">
                        ${p.nombre}
                        <span class="accordion-icon">▶</span>
                      </button>
                      <div id="${productId}" class="accordion-content">
                        <img src="${p.imagen}" alt="${p.nombre}" style="max-width:120px; border-radius:8px; margin-bottom:8px;">
                        <p><strong>Precio:</strong> ${p.precio}</p>
                        <p><strong>Características:</strong> ${p.caracteristicas}</p>
                        <p><strong>Medidas:</strong> ${p.medidas}</p>
                        <button class="buy-button" onclick="window.location.href='${p.link}'">Ver y Comprar</button>
                      </div>
                    </div>
                  `;
                }).join('')}
              </div>
            </div>
          </div>
        `;
      });
      addMessage(html, "bot", true);
      setupAccordionListeners();
    }

    function setupAccordionListeners() {
      document.querySelectorAll('.accordion-button').forEach(button => {
        button.addEventListener('click', () => {
          const content = document.getElementById(button.getAttribute('aria-controls'));
          const isExpanded = button.getAttribute('aria-expanded') === 'true';

          button.setAttribute('aria-expanded', !isExpanded);
          content.classList.toggle('active');

          const innerContent = content.querySelector('.category-content-container');
          if (innerContent) {
            innerContent.classList.toggle('active', !isExpanded);
          }
          
          button.querySelector('.accordion-icon').textContent = isExpanded ? '▶' : '▼';
        });
      });
    }

    // ******************************************************
    // *** Lógica del Chatbot ORIGINAL (handleBotResponse) ***
    // ******************************************************
    function handleBotResponse(query) {
      const q = query.toLowerCase().trim();
      if (q.length > 0) {
        const welcomeMessage = `
          ¡Hola! Soy el asistente de Ecotextil. 🌱
          <br><br>
          ¿En qué puedo ayudarte? Aquí tienes un resumen de nuestros productos.
        `;
        addMessage(welcomeMessage, "bot", true);
        displayCategoryAccordion();
        return;
      }
    }
    // ******************************************************
    // ******************************************************

    chatbotToggle.addEventListener('click', () => {
      const isVisible = chatbotWindow.style.display === 'block';
      chatbotWindow.style.display = isVisible ? 'none' : 'block';
      if (!isVisible) {
        // Al abrir, limpiar y mostrar mensaje de bienvenida
        chatMessages.innerHTML = ''; 
      }
    });

    chatClose.addEventListener('click', () => {
      chatbotWindow.style.display = 'none';
    });

    sendButton.addEventListener('click', () => {
      const text = userInput.value.trim();
      if (text === "") return;
      addMessage(text, "user");
      chatMessages.innerHTML = ''; // Limpiar mensajes antes de responder (Lógica Original)
      handleBotResponse(text);
      userInput.value = '';
    });

    userInput.addEventListener('keypress', e => {
      if (e.key === 'Enter') sendButton.click();
    });

    clearChatButton.addEventListener('click', () => {
      chatMessages.innerHTML = '';
    });
</script>

<style>
/* ======================================= */
/* ESTILOS ADICIONALES PARA EL ACORDEÓN DEL CHATBOT */
/* ======================================= */
#chat-messages .product-accordion-item {
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-bottom: 8px;
}

#chat-messages .accordion-button {
    background-color: #f0f0f0;
    color: #333;
    cursor: pointer;
    padding: 10px;
    width: 100%;
    text-align: left;
    border: none;
    outline: none;
    transition: background-color 0.2s;
    font-weight: bold;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#chat-messages .accordion-button:hover {
    background-color: #ddd;
}

#chat-messages .accordion-content {
    padding: 0 10px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out, padding 0.3s ease-out;
    background-color: #fff;
    border-top: 1px solid #eee;
}

#chat-messages .accordion-content.active {
    max-height: 600px; /* Ajuste para contenido visible */
    padding: 10px;
}

/* Estilos para el acordeón anidado (productos) */
#chat-messages .product-accordion-item-nested {
    border-top: 1px solid #eee;
    margin-top: 5px;
    padding-top: 5px;
}

#chat-messages .product-accordion-item-nested .accordion-button {
    background-color: #fff;
    font-weight: normal;
    padding: 8px 0;
    font-size: 0.9em;
}

#chat-messages .product-accordion-item-nested .accordion-content.active {
    padding: 10px 0 10px 10px; /* Ajuste para contenido anidado */
}

#chat-messages .buy-button {
    background-color: #9c88ff;
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    cursor: pointer;
    margin-top: 5px;
    font-size: 0.9em;
}

/* ======================================= */
/* REGLAS PARA DISPOSITIVOS MÓVILES (Max 768px) */
/* ======================================= */
@media (max-width: 768px) {
    /* --- HEADER y NAVEGACIÓN --- */
    .nav-centro {
        flex-direction: column; /* Apila el título y el menú */
        text-align: center;
        padding: 1rem 0;
    }

    .menu {
        flex-direction: column; /* Convierte el menú horizontal a vertical */
        width: 100%;
        margin-top: 10px;
        padding: 0;
    }

    .menu li {
        margin: 5px 0;
        width: 100%;
    }
    
    .menu a {
        padding: 0.75rem 0;
        display: block; /* Ocupa todo el ancho del li */
        border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Separador suave */
    }

    /* Oculta submenú por defecto en móviles */
    .submenu {
        position: static;
        width: 100%;
        padding-left: 15px; /* Indentación para submenú */
        background-color: rgba(0, 0, 0, 0.1);
    }

    /* Asegura que el carrito se mantenga visible y bien posicionado */
    .carrito-icono {
        padding: 0.75rem 0 !important; 
        text-align: center;
        display: block;
    }

    /* --- SECCIÓN HERO (Inicio) --- */
    .hero {
        padding: 4rem 1rem; /* Más espacio vertical */
        text-align: center;
    }
    
    .hero-content h2 {
        font-size: 2rem; /* Reduce el tamaño del título principal */
    }
    
    .hero-content p {
        font-size: 1rem;
    }

    /* --- SLIDER DE PRODUCTOS --- */
    .slider-box {
        overflow-x: scroll; /* Permite desplazamiento horizontal si no caben */
        width: 100%;
        padding: 0 1rem;
    }

    .slider-box ul {
        width: 1500px; /* Ancho suficiente para todos los slides */
    }

    .slider-box ul li {
        width: 200px; /* Tamaño fijo para cada item en el slider horizontal */
        margin-right: 15px;
    }

    .slide-item img {
        height: 150px; /* Ajusta la altura de las imágenes del slider */
    }

    /* --- BANNERS DE CATEGORÍAS --- */
    .banner-categorias {
        flex-direction: column; /* Apila las tarjetas verticalmente */
        padding: 1rem;
    }

    .categoria-banner {
        min-width: 100%; /* Ocupa todo el ancho */
        height: 200px; /* Altura fija para la tarjeta */
        margin-bottom: 15px;
    }

    /* --- FOOTER --- */
    footer .container {
        flex-direction: column; /* Apila las secciones del footer */
        gap: 2rem;
        padding: 1rem;
    }

    /* --- CHATBOT (Asegura visibilidad y tamaño) --- */
    #chatbot-window {
        width: 90%; /* Ancho más grande */
        max-width: 350px;
        right: 10px; /* Posición ajustada */
        bottom: 80px; /* Deja espacio para el botón de toggle */
        z-index: 1000; /* Asegura que esté por encima de otros elementos */
    }

    #chat-messages {
        max-height: 250px; /* Altura limitada para mensajes */
    }

    /* --- MODAL (Encuesta) --- */
    #miModal .modal-content {
        width: 95%; /* Ocupa casi todo el ancho */
        padding: 1rem;
    }
    
    #miModal iframe {
        height: 400px; /* Ajusta la altura del iframe de la encuesta */
    }
}
</style>
</body>
</html>

